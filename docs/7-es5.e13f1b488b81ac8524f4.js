!function(){function t(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function r(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t){var n=function(t,n){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==typeof n?n:String(n)}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{DMmz:function(n,e,o){"use strict";o.r(e),o.d(e,"GameModule",function(){return D});var a,c=o("ofXK"),s=o("tyNb"),d=o("6NWb"),u=o("vvyD"),f=o("fXoL"),l=((a=r(function t(){i(this,t)})).\u0275fac=function(t){return new(t||a)},a.\u0275mod=f.Mb({type:a}),a.\u0275inj=f.Lb({imports:[[c.c,u.a]]}),a),g=o("nAIU"),b=o("VdwR"),m=o("CzQJ"),p=o("bTqV"),h=o("NFeN"),v=o("YzOW");function y(t,n){if(1&t&&f.Pb(0,"img",7),2&t){var e=f.fc();f.kc("src",e.card.img.base64,f.uc)}}function w(t,n){if(1&t&&f.Pb(0,"fa-icon",8),2&t){var e=f.fc();f.kc("icon",e.card.icon)}}function C(t,n){if(1&t&&(f.Ub(0,"div",9),f.Cc(1),f.Tb()),2&t){var e=f.fc();f.Db(1),f.Dc(e.card.id)}}var _,k=function(t){return{rotated:t}},O=((_=function(){function t(n){i(this,t),this.gameService=n,this.onSelect=new f.o}return r(t,[{key:"isRotated",get:function(){return this._isRotated}},{key:"ngOnInit",value:function(){var t=this;this.showFrontAsIcon=this.gameService.config.cardIdType===v.a.ICONS,this.gameService.getCoveredCards().subscribe(function(n){return n.map(function(n){return t._isRotated=n.id!=t.card.id&&t._isRotated})})}},{key:"onClick",value:function(){this._isRotated=!0,this.onSelect.emit(this.card)}}]),t}()).\u0275fac=function(t){return new(t||_)(f.Ob(b.a))},_.\u0275cmp=f.Ib({type:_,selectors:[["app-memory-card"]],inputs:{card:"card"},outputs:{onSelect:"onSelect"},decls:8,vars:6,consts:[[1,"card",3,"ngClass","click"],[1,"card-inner"],[1,"front"],["alt","card",3,"src",4,"ngIf"],[1,"back","bg-primary"],["size","3x",3,"icon",4,"ngIf","ngIfElse"],["showCardId",""],["alt","card",3,"src"],["size","3x",3,"icon"],[1,"card-id-number","quicksand"]],template:function(t,n){if(1&t&&(f.Ub(0,"div",0),f.bc("click",function(){return n.onClick()}),f.Ub(1,"div",1),f.Ub(2,"div",2),f.Ac(3,y,1,1,"img",3),f.Tb(),f.Ub(4,"div",4),f.Ac(5,w,1,1,"fa-icon",5),f.Ac(6,C,2,1,"ng-template",null,6,f.Bc),f.Tb(),f.Tb(),f.Tb()),2&t){var e=f.qc(7);f.kc("ngClass",f.nc(4,k,n.isRotated)),f.Db(3),f.kc("ngIf",n.card.img),f.Db(2),f.kc("ngIf",n.showFrontAsIcon)("ngIfElse",e)}},directives:[c.i,c.k,d.a],styles:[".card[_ngcontent-%COMP%]{height:100px;width:100px;display:flex;align-items:center;justify-content:center;position:relative;margin:10px;cursor:pointer}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto;border-radius:4px}.card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]{border-radius:4px;position:absolute;height:100%;width:100%;left:0;top:0;display:flex;justify-content:center;align-items:center;backface-visibility:hidden}.card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]{transform:rotateY(180deg);background-color:#fff}.card-inner[_ngcontent-%COMP%]{height:100%;width:100%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2);transition:transform .6s;transform-style:preserve-3d}.rotated[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card-id-number[_ngcontent-%COMP%]{font-size:50px;font-weight:700}"]}),_);function x(t,n){if(1&t){var e=f.Vb();f.Ub(0,"app-memory-card",7),f.bc("onSelect",function(t){return f.sc(e),f.fc(2).onChooseCard(t)}),f.Tb()}2&t&&f.kc("card",n.$implicit)}function P(t,n){if(1&t&&(f.Ub(0,"div",5),f.Ac(1,x,1,1,"app-memory-card",6),f.Tb()),2&t){var e=n.$implicit;f.Db(1),f.kc("ngForOf",e)}}var M,S,I=((M=function(){function n(t,e,r){var o,a,c;i(this,n),this.router=t,this.gameService=e,this.dialogService=r,this.backgroundStyle="",this.cardRows=[],this._cards=null===(c=null===(a=null===(o=this.router.getCurrentNavigation())||void 0===o?void 0:o.extras)||void 0===a?void 0:a.state)||void 0===c?void 0:c.cards}return r(n,[{key:"ngOnInit",value:function(){var t,n=this.gameService.config;n&&(null===(t=this._cards)||void 0===t?void 0:t.length)?(this.title=n.title.toUpperCase(),n.backgroundImgSrc&&(this.backgroundStyle="url(".concat(n.backgroundImgSrc,")")),this._setBoardDim(2*n.numPairs),this._startGame()):this._goHome()}},{key:"_goHome",value:function(){this.gameService.goHome()}},{key:"_setBoardDim",value:function(t){var n=t%5==0?5:4;this._boardDim=new j(t/n,n)}},{key:"_startGame",value:function(){this.cardRows=[];for(var t=this._boardDim.numCols,n=0;n<this._boardDim.numRows;n++){var e=n*t,r=this._cards.slice(e,e+t);this.gameService.setIdAsRowColumn(n,r),this.cardRows.push(r)}}},{key:"_printPairs",value:function(){if(this.cardRows.length){var n=[],e=[],r=[];this.cardRows.forEach(function(n){return r.push.apply(r,t(n))}),r.forEach(function(t,o){if(!n.includes(o)){var i=r.findIndex(function(n,e){return n.code===t.code&&e!=o});n.push(o,i),e.push("".concat(t.id,", ").concat(r[i].id))}}),console.log("pairs",e)}}},{key:"_startNewGame",value:function(){this._cards=this.gameService.restartGame(this._cards),this._startGame()}},{key:"newGame",value:function(){var t=this,n=function(){return t._startNewGame()};if(!this.gameService.isGameFinished)return this.dialogService.openLiveGameConfirmationDialog(n,"Tem certeza que deseja iniciar novo jogo?");n()}},{key:"onChooseCard",value:function(t){var n=this;this.gameService.onChooseCard(t)&&setTimeout(function(){n._openNewGameDialog()},g.a.winNotificationTimeout)}},{key:"_openNewGameDialog",value:function(){var t=this;this.dialogService.openConfirmationDialog({header:{icon:"mood",iconColor:"limegreen",title:"Parab\xe9ns!"},bodyText:"Deseja jogar novamente?",okCallback:function(){return t._startNewGame()}})}}]),n}()).\u0275fac=function(t){return new(t||M)(f.Ob(s.b),f.Ob(b.a),f.Ob(m.a))},M.\u0275cmp=f.Ib({type:M,selectors:[["app-game"]],decls:8,vars:3,consts:[[1,"board-background"],[1,"new-game-btn"],["mat-stroked-button","","color","primary",3,"click"],[1,"board"],["class","board-row",4,"ngFor","ngForOf"],[1,"board-row"],[3,"card","onSelect",4,"ngFor","ngForOf"],[3,"card","onSelect"]],template:function(t,n){1&t&&(f.Ub(0,"div",0),f.Ub(1,"div",1),f.Ub(2,"button",2),f.bc("click",function(){return n.newGame()}),f.Ub(3,"mat-icon"),f.Cc(4,"refresh"),f.Tb(),f.Cc(5," Novo jogo "),f.Tb(),f.Tb(),f.Ub(6,"div",3),f.Ac(7,P,2,1,"div",4),f.Tb(),f.Tb()),2&t&&(f.xc("background-image",n.backgroundStyle),f.Db(7),f.kc("ngForOf",n.cardRows))},directives:[p.a,h.a,c.j,O],styles:['.control-panel[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;min-height:50px}.control-panel.card-count[_ngcontent-%COMP%]{margin-right:10px}.control-panel.btn-new-game[_ngcontent-%COMP%]{margin-left:10px}.board-background[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;background-position:50%;background-repeat:no-repeat;background-size:cover}.board-background[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background-color:hsla(0,0%,100%,.4)}.new-game-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:0 1rem}.board[_ngcontent-%COMP%]{flex-direction:column;align-items:center;opacity:1!important}.board[_ngcontent-%COMP%], .board-row[_ngcontent-%COMP%]{display:flex;justify-content:center}.board-row[_ngcontent-%COMP%]{flex-direction:row;gap:1rem}.board-grid-space[_ngcontent-%COMP%]{width:30px}.board-grid-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-family:Quicksand;font-size:48px}.board-grid-col[_ngcontent-%COMP%]{width:100px;margin:0 10px 16px}.board-grid-row[_ngcontent-%COMP%]{height:100px;margin:10px 0}']}),M),j=r(function t(n,e){i(this,t),this.numRows=n,this.numCols=e}),T=[{path:"",component:I}],D=((S=r(function t(){i(this,t)})).\u0275fac=function(t){return new(t||S)},S.\u0275mod=f.Mb({type:S}),S.\u0275inj=f.Lb({imports:[[c.c,s.c.forChild(T),d.c,u.a,l]]}),S)}}])}();
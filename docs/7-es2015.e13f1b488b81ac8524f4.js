(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{DMmz:function(t,n,e){"use strict";e.r(n),e.d(n,"GameModule",function(){return y});var o=e("ofXK"),i=e("tyNb"),r=e("6NWb"),c=e("vvyD"),a=e("fXoL");let s=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({imports:[[o.c,c.a]]}),t})();var d=e("nAIU"),g=e("VdwR"),l=e("CzQJ"),b=e("bTqV"),m=e("NFeN"),u=e("YzOW");function f(t,n){if(1&t&&a.Pb(0,"img",7),2&t){const t=a.fc();a.kc("src",t.card.img.base64,a.uc)}}function h(t,n){if(1&t&&a.Pb(0,"fa-icon",8),2&t){const t=a.fc();a.kc("icon",t.card.icon)}}function p(t,n){if(1&t&&(a.Ub(0,"div",9),a.Cc(1),a.Tb()),2&t){const t=a.fc();a.Db(1),a.Dc(t.card.id)}}const C=function(t){return{rotated:t}};let _=(()=>{class t{constructor(t){this.gameService=t,this.onSelect=new a.o}get isRotated(){return this._isRotated}ngOnInit(){this.showFrontAsIcon=this.gameService.config.cardIdType===u.a.ICONS,this.gameService.getCoveredCards().subscribe(t=>t.map(t=>this._isRotated=t.id!=this.card.id&&this._isRotated))}onClick(){this._isRotated=!0,this.onSelect.emit(this.card)}}return t.\u0275fac=function(n){return new(n||t)(a.Ob(g.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-memory-card"]],inputs:{card:"card"},outputs:{onSelect:"onSelect"},decls:8,vars:6,consts:[[1,"card",3,"ngClass","click"],[1,"card-inner"],[1,"front"],["alt","card",3,"src",4,"ngIf"],[1,"back","bg-primary"],["size","3x",3,"icon",4,"ngIf","ngIfElse"],["showCardId",""],["alt","card",3,"src"],["size","3x",3,"icon"],[1,"card-id-number","quicksand"]],template:function(t,n){if(1&t&&(a.Ub(0,"div",0),a.bc("click",function(){return n.onClick()}),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ac(3,f,1,1,"img",3),a.Tb(),a.Ub(4,"div",4),a.Ac(5,h,1,1,"fa-icon",5),a.Ac(6,p,2,1,"ng-template",null,6,a.Bc),a.Tb(),a.Tb(),a.Tb()),2&t){const t=a.qc(7);a.kc("ngClass",a.nc(4,C,n.isRotated)),a.Db(3),a.kc("ngIf",n.card.img),a.Db(2),a.kc("ngIf",n.showFrontAsIcon)("ngIfElse",t)}},directives:[o.i,o.k,r.a],styles:[".card[_ngcontent-%COMP%]{height:100px;width:100px;display:flex;align-items:center;justify-content:center;position:relative;margin:10px;cursor:pointer}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto;border-radius:4px}.card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]{border-radius:4px;position:absolute;height:100%;width:100%;left:0;top:0;display:flex;justify-content:center;align-items:center;backface-visibility:hidden}.card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]{transform:rotateY(180deg);background-color:#fff}.card-inner[_ngcontent-%COMP%]{height:100%;width:100%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2);transition:transform .6s;transform-style:preserve-3d}.rotated[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card-id-number[_ngcontent-%COMP%]{font-size:50px;font-weight:700}"]}),t})();function v(t,n){if(1&t){const t=a.Vb();a.Ub(0,"app-memory-card",7),a.bc("onSelect",function(n){return a.sc(t),a.fc(2).onChooseCard(n)}),a.Tb()}2&t&&a.kc("card",n.$implicit)}function w(t,n){if(1&t&&(a.Ub(0,"div",5),a.Ac(1,v,1,1,"app-memory-card",6),a.Tb()),2&t){const t=n.$implicit;a.Db(1),a.kc("ngForOf",t)}}let O=(()=>{class t{constructor(t,n,e){var o,i,r;this.router=t,this.gameService=n,this.dialogService=e,this.backgroundStyle="",this.cardRows=[],this._cards=null===(r=null===(i=null===(o=this.router.getCurrentNavigation())||void 0===o?void 0:o.extras)||void 0===i?void 0:i.state)||void 0===r?void 0:r.cards}ngOnInit(){var t;let n=this.gameService.config;n&&(null===(t=this._cards)||void 0===t?void 0:t.length)?(this.title=n.title.toUpperCase(),n.backgroundImgSrc&&(this.backgroundStyle=`url(${n.backgroundImgSrc})`),this._setBoardDim(2*n.numPairs),this._startGame()):this._goHome()}_goHome(){this.gameService.goHome()}_setBoardDim(t){let n=t%5==0?5:4;this._boardDim=new k(t/n,n)}_startGame(){this.cardRows=[];const t=this._boardDim.numCols;for(let n=0;n<this._boardDim.numRows;n++){let e=n*t,o=this._cards.slice(e,e+t);this.gameService.setIdAsRowColumn(n,o),this.cardRows.push(o)}}_printPairs(){if(!this.cardRows.length)return;let t=[],n=[],e=[];this.cardRows.forEach(t=>e.push(...t)),e.forEach((o,i)=>{if(t.includes(i))return;let r=e.findIndex((t,n)=>t.code===o.code&&n!=i);t.push(i,r),n.push(`${o.id}, ${e[r].id}`)}),console.log("pairs",n)}_startNewGame(){this._cards=this.gameService.restartGame(this._cards),this._startGame()}newGame(){const t=()=>this._startNewGame();if(!this.gameService.isGameFinished)return this.dialogService.openLiveGameConfirmationDialog(t,"Tem certeza que deseja iniciar novo jogo?");t()}onChooseCard(t){this.gameService.onChooseCard(t)&&setTimeout(()=>{this._openNewGameDialog()},d.a.winNotificationTimeout)}_openNewGameDialog(){this.dialogService.openConfirmationDialog({header:{icon:"mood",iconColor:"limegreen",title:"Parab\xe9ns!"},bodyText:"Deseja jogar novamente?",okCallback:()=>this._startNewGame()})}}return t.\u0275fac=function(n){return new(n||t)(a.Ob(i.b),a.Ob(g.a),a.Ob(l.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-game"]],decls:8,vars:3,consts:[[1,"board-background"],[1,"new-game-btn"],["mat-stroked-button","","color","primary",3,"click"],[1,"board"],["class","board-row",4,"ngFor","ngForOf"],[1,"board-row"],[3,"card","onSelect",4,"ngFor","ngForOf"],[3,"card","onSelect"]],template:function(t,n){1&t&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"button",2),a.bc("click",function(){return n.newGame()}),a.Ub(3,"mat-icon"),a.Cc(4,"refresh"),a.Tb(),a.Cc(5," Novo jogo "),a.Tb(),a.Tb(),a.Ub(6,"div",3),a.Ac(7,w,2,1,"div",4),a.Tb(),a.Tb()),2&t&&(a.xc("background-image",n.backgroundStyle),a.Db(7),a.kc("ngForOf",n.cardRows))},directives:[b.a,m.a,o.j,_],styles:['.control-panel[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;min-height:50px}.control-panel.card-count[_ngcontent-%COMP%]{margin-right:10px}.control-panel.btn-new-game[_ngcontent-%COMP%]{margin-left:10px}.board-background[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;background-position:50%;background-repeat:no-repeat;background-size:cover}.board-background[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background-color:hsla(0,0%,100%,.4)}.new-game-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:0 1rem}.board[_ngcontent-%COMP%]{flex-direction:column;align-items:center;opacity:1!important}.board[_ngcontent-%COMP%], .board-row[_ngcontent-%COMP%]{display:flex;justify-content:center}.board-row[_ngcontent-%COMP%]{flex-direction:row;gap:1rem}.board-grid-space[_ngcontent-%COMP%]{width:30px}.board-grid-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-family:Quicksand;font-size:48px}.board-grid-col[_ngcontent-%COMP%]{width:100px;margin:0 10px 16px}.board-grid-row[_ngcontent-%COMP%]{height:100px;margin:10px 0}']}),t})();class k{constructor(t,n){this.numRows=t,this.numCols=n}}const x=[{path:"",component:O}];let y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({imports:[[o.c,i.c.forChild(x),r.c,c.a,s]]}),t})()}}]);
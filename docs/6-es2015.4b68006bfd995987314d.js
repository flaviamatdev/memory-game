(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{S4pq:function(e,t,n){"use strict";n.r(t),n.d(t,"GameBuilderModule",function(){return Qe});var i=n("ofXK"),a=n("3Pt+"),r=n("tyNb"),l=n("sYmb"),o=n("vvyD"),s=n("fXoL");let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({imports:[[i.c,a.q,a.i,o.a,l.b]]}),e})();var m=function(e){return e[e.UPLOAD=1]="UPLOAD",e[e.URL=2]="URL",e}({});class u{static setFormControlAsRequiredOrNot(e,t){t?this.setFormControlAsRequired(e):this.setFormControlAsNotRequired(e)}static setFormControlAsRequired(e){e.reset(),e.setValidators(a.r.required),e.updateValueAndValidity()}static setFormControlAsNotRequired(e){e.reset(),e.clearValidators(),e.updateValueAndValidity()}}var p=n("nAIU");const b=p.a.upload.fileNameSeparator,g={pageTitle:{gameBuilder:{pt:"Monte o seu jogo",en:"Create your game"},demoBuilder:{pt:"Jogo Demonstra\xe7\xe3o",en:"Demo Game"}},instruction:{pt:"Preencha o formul\xe1rio abaixo com as informa\xe7\xf5es para o jogo:",en:"Fill out the form below with the information for the game:"},sectionTitle:{mainData:{pt:"Dados Principais",en:"Main Data"},backgroundImg:{pt:"Imagem de Fundo",en:"Background image"},cardImages:{pt:"Imagens das Cartas",en:"Card Images"}},gameTitle:{demo:{pt:"Jogo da Mem\xf3ria (Demo)",en:"Demo Memory Game"}},input:{gameTitle:{pt:"T\xedtulo do jogo",en:"Game title"},singleImgPerPair:{pt:"Cada par possui imagens iguais?",en:"Does each pair have the same images?"},numPairs:{pt:"N\xba de pares",en:"Number of pairs"},cardIdType:{pt:"Modo de identifica\xe7\xe3o das cartas",en:"Card identification mode"},backgroundImg:{add:{pt:"Inserir imagem de fundo?",en:"Insert background image?"},url:{pt:"Link da imagem",en:"Image link"},upload:{pt:"Enviar arquivo",en:"Upload image file"}},cardImages:{pair:{pt:"Par n\xba ",en:"Pair #"},url:{pairImageLink:{pt:"Link da Imagem do Par ",en:"Image Link of Pair #"},diffImages:{pairImageLink1:{pt:"Link da Imagem 1 do Par ",en:"Image Link #1 of Pair #"},pairImageLink2:{pt:"Link da Imagem 2 do Par ",en:"Image Link #2 of Pair #"}}},upload:{pickDirPath:{pt:"Selecione a pasta que cont\xe9m as imagens das cartas",en:"Select the folder containing the card images"},diffImagesPerPair:{warning:{pt:`Envio de arquivos diferentes por par: os nomes dos arquivos referentes ao mesmo par devem ter o mesmo prefixo seguido de ${b} . Veja um exemplo `,en:`Sending different files per pair: file names referring to the same pair must have the same prefix followed by ${b}. See an example `},warningLink:{pt:"aqui",en:"here"}}}}},submitBtn:{createGame:{pt:"Criar jogo",en:"Create game"},playDemo:{pt:"Jogar",en:"Play"}},diffImagesPerPairDialog:{title:{pt:"Envio de arquivos diferentes por par",en:"Sending different files per pair"},instruction:{pt:"Exemplo de nome para arquivos de images para cada par",en:"Example name for image files for each pair"},pairName:{pt:"nome do par",en:"pair name"},imageId:{pt:"identificacao da imagem",en:"image identification"}}};let d=(()=>{class e{constructor(){this.flexDirectionRow=!1,this.disabled=!1,this.onChange=new s.o}_setOriginalRequired(){this._originalRequired=this.isRequired}checkForm(){this.form||(this.controlName="model",this.form=new a.g({model:new a.e}))}get formControl(){return this.form.controls[this.controlName]}get isRequired(){var e;return(null===(e=this.formControl)||void 0===e?void 0:e.hasError("required"))||!1}get isInvalid(){return this.hasError("invalid")}hasError(e){let t=this.formControl;return!this.isRequired&&(t.invalid||t.hasError(e))}get inputClass(){return{"d-flex-row":this.flexDirectionRow,"d-flex-col":!this.flexDirectionRow}}get getSelectValue(){try{return this.formControl.value}catch(e){return null}}_setAsInvalid(){this._setFormControlAsInvalid(this.formControl)}_setFormControlAsInvalid(e){e.setErrors({invalid:!0}),e.markAsTouched()}_setAsValidByOriginalRequired(){this._originalRequired?this._setAsRequired():this._setAsValid()}_setAsValid(){this._setFormControlAsValid(this.formControl)}_setFormControlAsValid(e){e.setErrors(null),e.markAsTouched()}_setAsRequired(){this._setFormControlAsRequired(this.formControl)}_setFormControlAsRequired(e){e.setErrors({required:!0}),e.markAsTouched()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-abstract-input"]],inputs:{labelTranslate:"labelTranslate",label:"label",labelComment:"labelComment",form:"form",controlName:"controlName",flexDirectionRow:"flexDirectionRow",disabled:"disabled"},outputs:{onChange:"onChange"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var f=n("kmnG");function h(e,t){if(1&e&&(s.Ub(0,"span",4),s.Fc(1),s.Tb()),2&e){const e=s.fc(2);s.Db(1),s.Gc(e.comment)}}function T(e,t){if(1&e&&(s.Ub(0,"mat-label"),s.Fc(1),s.gc(2,"translate"),s.Dc(3,h,2,1,"span",2),s.Ub(4,"span",3),s.Fc(5),s.Tb(),s.Tb()),2&e){const e=s.fc();s.Db(1),s.Hc(" ",s.ic(2,3,"TRANSLATION",e.labelTranslate)," "),s.Db(2),s.lc("ngIf",e.comment),s.Db(2),s.Hc(" ",e.required?"*":"","")}}function I(e,t){if(1&e&&(s.Ub(0,"span",4),s.Fc(1),s.Tb()),2&e){const e=s.fc(2);s.Db(1),s.Gc(e.comment)}}function C(e,t){if(1&e&&(s.Fc(0),s.Dc(1,I,2,1,"span",2),s.Ub(2,"span",3),s.Fc(3),s.Tb()),2&e){const e=s.fc();s.Hc(" ",e.label," "),s.Db(1),s.lc("ngIf",e.comment),s.Db(2),s.Hc(" ",e.required?"*":"","")}}let N=(()=>{class e{constructor(){this.required=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-input-label"]],inputs:{labelTranslate:"labelTranslate",label:"label",required:"required",comment:"comment"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["showRegularLabel",""],["class","input-label-comment",4,"ngIf"],[1,"input-label-required"],[1,"input-label-comment"]],template:function(e,t){if(1&e&&(s.Dc(0,T,6,6,"mat-label",0),s.Dc(1,C,4,3,"ng-template",null,1,s.Ec)),2&e){const e=s.tc(2);s.lc("ngIf",t.labelTranslate)("ngIfElse",e)}},directives:[i.k,f.f],pipes:[l.c],styles:["mat-label[_ngcontent-%COMP%]{display:block}.input-label-required[_ngcontent-%COMP%]{color:red}.input-label-comment[_ngcontent-%COMP%]{color:grey;font-size:smaller}"]}),e})();var v=n("d3UM"),A=n("FKr1"),D=n("NFeN");const O=["allOption"];function _(e,t){if(1&e&&(s.Ub(0,"mat-option",9,10),s.Fc(2),s.Tb()),2&e){const e=s.fc();s.lc("value",e.ALL_OPTION),s.Db(2),s.Hc(" ",e.allOptionLabel," ")}}function U(e,t){if(1&e&&(s.Ub(0,"mat-option",12),s.Fc(1),s.gc(2,"translate"),s.Tb()),2&e){const e=t.$implicit,n=s.fc(2);s.lc("value",n.getOptionValue(e))("disabled",n.multiple&&n.allOptionSelected),s.Db(1),s.Hc(" ",s.ic(2,3,"TRANSLATION",e[n.labelAttribute])," ")}}function P(e,t){if(1&e&&(s.Ub(0,"div"),s.Dc(1,U,3,6,"mat-option",11),s.Tb()),2&e){const e=s.fc();s.Db(1),s.lc("ngForOf",e.optionsTranslate)}}function S(e,t){if(1&e&&(s.Ub(0,"mat-option",12),s.Fc(1),s.Tb()),2&e){const e=t.$implicit,n=s.fc(2);s.lc("value",n.getOptionValue(e))("disabled",n.multiple&&n.allOptionSelected),s.Db(1),s.Hc(" ",e[n.labelAttribute]," ")}}function F(e,t){if(1&e&&s.Dc(0,S,2,3,"mat-option",11),2&e){const e=s.fc();s.lc("ngForOf",e.options)}}function y(e,t){1&e&&(s.Ub(0,"mat-error"),s.Ub(1,"mat-icon",13),s.Fc(2,"cancel"),s.Tb(),s.Ub(3,"strong"),s.Fc(4),s.gc(5,"translate"),s.Tb(),s.Tb()),2&e&&(s.Db(4),s.Gc(s.hc(5,1,"FORM_INPUT.REQUIRED")))}function L(e,t){if(1&e&&(s.Ub(0,"div",14),s.Ub(1,"mat-icon",13),s.Fc(2,"cancel"),s.Tb(),s.Fc(3),s.Tb()),2&e){const e=s.fc();s.Db(3),s.Hc(" Erro ao buscar op\xe7\xf5es para ",e.label,"\n")}}let R=(()=>{class e extends d{constructor(){super(...arguments),this.ALL_OPTION="all",this.options=[],this.optionsTranslate=[],this.valueAttribute="id",this.labelAttribute="label",this.multiple=!1,this.useFullOptionAsValue=!1,this.onFinishedLoading=new s.o,this.showLoadingOptionsError=!1,this._allSelected=!1}ngOnInit(){this.showLoadingOptionsError=!1,this.checkForm()}ngOnChanges(e){e.options&&null==e.options.currentValue&&(this.showLoadingOptionsError=!0)}getOptionValue(e){return this.useFullOptionAsValue?e:e[this.valueAttribute]}onChangeSelection(e){this.allOptionLabel&&this.multiple&&this._onChangeSelectionMultiple(e),this.onChange.emit(e)}_onChangeSelectionMultiple(e){if(this._allSelected)return this.formControl.setValue([]),void(this._allSelected=!1);this._allSelected=e.includes(this.ALL_OPTION)||e.length==this.options.length,this._allSelected&&this.formControl.setValue(this.options.map(e=>e[this.valueAttribute]))}get allOptionSelected(){var e;return(null===(e=this._allOption)||void 0===e?void 0:e.selected)||!1}}return e.\u0275fac=function(t){return w(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-select"]],viewQuery:function(e,t){if(1&e&&s.Jc(O,1),2&e){let e;s.sc(e=s.cc())&&(t._allOption=e.first)}},inputs:{options:"options",optionsTranslate:"optionsTranslate",valueAttribute:"valueAttribute",labelAttribute:"labelAttribute",multiple:"multiple",allOptionLabel:"allOptionLabel",useFullOptionAsValue:"useFullOptionAsValue"},outputs:{onFinishedLoading:"onFinishedLoading"},features:[s.Ab,s.Bb],decls:10,vars:13,consts:[[3,"id","ngClass"],[3,"label","labelTranslate","comment","required"],["appearance","outline","floatLabel","never","color","primary",1,"w-100","mat-form-field-label-out"],[3,"formControl","multiple","selectionChange"],[3,"value",4,"ngIf"],[4,"ngIf","ngIfElse"],["showRegularOptions",""],[4,"ngIf"],["class","loading-options-error",4,"ngIf"],[3,"value"],["allOption",""],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["aria-label","false"],[1,"loading-options-error"]],template:function(e,t){if(1&e&&(s.Ub(0,"div",0),s.Pb(1,"app-input-label",1),s.Ub(2,"mat-form-field",2),s.Ub(3,"mat-select",3),s.bc("selectionChange",function(e){return t.onChangeSelection(e.value)}),s.Dc(4,_,3,2,"mat-option",4),s.Dc(5,P,2,1,"div",5),s.Dc(6,F,1,1,"ng-template",null,6,s.Ec),s.Tb(),s.Dc(8,y,6,3,"mat-error",7),s.Tb(),s.Tb(),s.Dc(9,L,4,1,"div",8)),2&e){const e=s.tc(7);s.nc("id","",t.controlName,"-div"),s.lc("ngClass",t.inputClass),s.Db(1),s.lc("label",t.label)("labelTranslate",t.labelTranslate)("comment",t.labelComment)("required",t.isRequired),s.Db(2),s.lc("formControl",t.formControl)("multiple",t.multiple),s.Db(1),s.lc("ngIf",t.allOptionLabel),s.Db(1),s.lc("ngIf",null==t.optionsTranslate?null:t.optionsTranslate.length)("ngIfElse",e),s.Db(3),s.lc("ngIf",t.isRequired),s.Db(1),s.lc("ngIf",t.showLoadingOptionsError)}},directives:[i.i,N,f.c,v.a,a.m,a.f,i.k,A.m,i.j,f.b,D.a],pipes:[l.c],styles:[".loading-options-error[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;-moz-column-gap:.5em;column-gap:.5em;color:red;font-size:smaller;font-style:italic;margin-bottom:4px}.loading-options-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0}"]}),e})();const w=s.Wb(R),x={nonMultiple:{input:{pt:"Como deseja inserir a imagem?",en:"How do you want to insert the image?"},options:{url:{pt:"Link da imagem",en:"Image link"},upload:{pt:"Enviar arquivo",en:"Upload image file"}}},multiple:{input:{pt:"Como deseja inserir as imagens?",en:"How do you want to insert the images?"},options:{url:{pt:"Link das imagens",en:"Image links"},upload:{pt:"Enviar arquivos",en:"Upload image files"}}}};let M=(()=>{class e extends R{constructor(){super(...arguments),this.TRANSLATION=x}ngOnInit(){let e=this.multiple?this.TRANSLATION.multiple:this.TRANSLATION.nonMultiple;this.labelTranslate=e.input,this.options=[{id:m.UPLOAD,label:e.options.upload},{id:m.URL,label:e.options.url}]}onChangeSelection(e){this.onChange.emit(e)}}return e.\u0275fac=function(t){return E(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-select-image-src-type"]],features:[s.Ab],decls:1,vars:4,consts:[[3,"labelTranslate","form","controlName","optionsTranslate","onChange"]],template:function(e,t){1&e&&(s.Ub(0,"app-select",0),s.bc("onChange",function(e){return t.onChangeSelection(e)}),s.Tb()),2&e&&s.lc("labelTranslate",t.labelTranslate)("form",t.form)("controlName",t.controlName)("optionsTranslate",t.options)},directives:[R],styles:[""]}),e})();const E=s.Wb(M);var q=n("bTqV"),k=n("Qu3c");function V(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div",1),s.Pb(1,"img",2),s.Ub(2,"div",3),s.Ub(3,"button",4),s.bc("click",function(){return s.vc(e),s.fc().deleteFile()}),s.gc(4,"translate"),s.Ub(5,"mat-icon"),s.Fc(6,"delete"),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&e){const e=s.fc();s.Db(1),s.lc("src",e.src,s.xc),s.Db(2),s.mc("matTooltip",s.hc(4,2,"DELETE_IMAGE"))}}let G=(()=>{class e{constructor(){this.onDelete=new s.o}deleteFile(){this.src=null,this.onDelete.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-image-preview"]],inputs:{src:"src"},outputs:{onDelete:"onDelete"},decls:1,vars:1,consts:[["class","form-line",4,"ngIf"],[1,"form-line"],["alt","Image",3,"src"],[1,"delete-btn"],["mat-icon-button","","mat-stroked-button","","type","button","color","accent",3,"matTooltip","click"]],template:function(e,t){1&e&&s.Dc(0,V,7,4,"div",0),2&e&&s.lc("ngIf",t.src)},directives:[i.k,q.a,k.a,D.a],pipes:[l.c],styles:[".form-line[_ngcontent-%COMP%]{align-items:center}img[_ngcontent-%COMP%]{width:50px;height:auto}.delete-btn[_ngcontent-%COMP%]{margin-top:.75rem}"]}),e})();var B=n("qFsG");function $(e,t){1&e&&(s.Ub(0,"mat-error"),s.Ub(1,"mat-icon",5),s.Fc(2,"cancel"),s.Tb(),s.Ub(3,"strong"),s.Fc(4),s.gc(5,"translate"),s.Tb(),s.Tb()),2&e&&(s.Db(4),s.Gc(s.hc(5,1,"FORM_INPUT.REQUIRED")))}function j(e,t){1&e&&(s.Ub(0,"mat-error"),s.Ub(1,"mat-icon",5),s.Fc(2,"cancel"),s.Tb(),s.Ub(3,"strong"),s.Fc(4),s.gc(5,"translate"),s.Tb(),s.Tb()),2&e&&(s.Db(4),s.Gc(s.hc(5,1,"FORM_INPUT.INVALID")))}const H=function(e){return{minLength:e}};function W(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Ub(1,"mat-icon",5),s.Fc(2,"cancel"),s.Tb(),s.Ub(3,"strong"),s.Fc(4),s.gc(5,"translate"),s.Tb(),s.Tb()),2&e){const e=s.fc();s.Db(4),s.Gc(s.ic(5,1,"FORM_INPUT.MIN_LENGTH",s.qc(4,H,e.minLength)))}}let J=(()=>{class e extends d{constructor(){super(...arguments),this.placeholder="",this.maxLength=100,this.title=""}clear(){this.formControl.setValue(null)}sendChangeEvent(e){(null==e?void 0:e.target)&&this.onChange.emit(e.target.value)}_eventTypeDeleteContent(e){return"deleteContentBackward"===(null==e?void 0:e.inputType)}}return e.\u0275fac=function(t){return Q(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-input-text"]],inputs:{placeholder:"placeholder",minLength:"minLength",maxLength:"maxLength",title:"title"},features:[s.Ab],decls:7,vars:17,consts:[[3,"id","ngClass"],[3,"label","labelTranslate","comment","required"],["appearance","outline","floatLabel","never","color","primary",1,"w-100","mat-form-field-label-out"],["matInput","","type","text",3,"formControl","id","name","minLength","maxLength","title","placeholder","readonly","change"],[4,"ngIf"],["aria-label","false"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Pb(1,"app-input-label",1),s.Ub(2,"mat-form-field",2),s.Ub(3,"input",3),s.bc("change",function(e){return t.sendChangeEvent(e)}),s.Tb(),s.Dc(4,$,6,3,"mat-error",4),s.Dc(5,j,6,3,"mat-error",4),s.Dc(6,W,6,6,"mat-error",4),s.Tb(),s.Tb()),2&e&&(s.nc("id","",t.controlName,"-div"),s.lc("ngClass",t.inputClass),s.Db(1),s.lc("label",t.label)("labelTranslate",t.labelTranslate)("comment",t.labelComment)("required",t.isRequired),s.Db(2),s.lc("formControl",t.formControl)("id",t.controlName)("name",t.controlName)("minLength",t.minLength)("maxLength",t.maxLength)("title",t.title)("placeholder",t.placeholder)("readonly",t.disabled),s.Db(1),s.lc("ngIf",t.isRequired),s.Db(1),s.lc("ngIf",t.isInvalid),s.Db(1),s.lc("ngIf",t.minLength&&t.hasError("minLength")))},directives:[i.i,N,f.c,B.b,a.c,a.m,a.f,i.k,f.b,D.a],pipes:[l.c],styles:["",".d-flex-row[_ngcontent-%COMP%]{justify-content:space-between}"]}),e})();const Q=s.Wb(J);class z{constructor(e,t){this.base64=e,this.filename=t}}const K={noFileChosen:{pt:"Nenhum arquivo escolhido",en:"No file chosen"},nonMultiple:{btn:{pt:"Escolher arquivo",en:"Choose file"},acceptErrorMsg:{pt:"O arquivo selecionado est\xe1 fora dos formatos de imagem aceitos: {{ accept }}. Tente novamente!",en:"The selected file is outside the supported image formats: {{ accept }}. Try again!"}},multiple:{btn:{pt:"Escolher arquivos",en:"Choose files"},acceptErrorMsg:{pt:"Pelo menos 1 arquivo da pasta selecionada est\xe1 fora dos formatos de imagem aceitos: {{ accept }}. Tente novamente!",en:"At least 1 file in the selected folder is outside the accepted image formats: {{ accept }}. Try again!"},chosenFilesMsg:{pt:"arquivo(s)",en:"file(s)"}}};var X=n("2g2N"),Y=n("AgV0");const Z=["uploadInput"];function ee(e,t){if(1&e&&s.Pb(0,"app-input-label",7),2&e){const e=s.fc();s.lc("label",e.label)("labelTranslate",e.labelTranslate)("comment",e.labelComment)("required",e.isRequired)}}function te(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div"),s.Ub(1,"input",8,9),s.bc("change",function(t){return s.vc(e),s.fc().onSelectFiles(t)}),s.Tb(),s.Tb()}if(2&e){const e=s.fc();s.Db(1),s.lc("accept",e.ACCEPT_IMG)}}function ne(e,t){if(1&e){const e=s.Vb();s.Ub(0,"input",10,9),s.bc("change",function(t){return s.vc(e),s.fc().onSelectFiles(t)}),s.Tb()}if(2&e){const e=s.fc();s.lc("accept",e.ACCEPT_IMG)("multiple",e.multiple)}}function ie(e,t){if(1&e&&(s.Ub(0,"div"),s.Fc(1),s.gc(2,"translate"),s.Tb()),2&e){const e=s.fc();s.Db(1),s.Hc(" ",s.ic(2,1,"TRANSLATION",e.TRANSLATION.noFileChosen)," ")}}function ae(e,t){if(1&e&&(s.Ub(0,"span"),s.Fc(1),s.Tb()),2&e){const e=s.fc(2);s.Db(1),s.Gc(e.singleChosedFileName)}}function re(e,t){if(1&e&&(s.Ub(0,"span"),s.Fc(1),s.gc(2,"translate"),s.Tb()),2&e){const e=s.fc(2);s.Db(1),s.Ic(" ",e.numFiles," ",s.ic(2,2,"TRANSLATION",e.TRANSLATION.multiple.chosenFilesMsg)," ")}}function le(e,t){if(1&e&&(s.Ub(0,"div",11),s.Dc(1,ae,2,1,"span",12),s.Dc(2,re,3,5,"span",12),s.Tb()),2&e){const e=s.fc();s.lc("ngSwitch",e.multiple),s.Db(1),s.lc("ngSwitchCase",!1),s.Db(1),s.lc("ngSwitchCase",!0)}}let oe=(()=>{class e extends d{constructor(e,t){super(),this.toastService=e,this.translationService=t,this.TRANSLATION=K,this.ACCEPT_IMG=["image/png","image/jpeg"],this.multiple=!1,this.selectAllDir=!1,this.onClearInput=new s.o,this._numFiles=0}get numFiles(){return this._numFiles}ngOnInit(){this.multiple=this.multiple||this.selectAllDir,this.btnTranslation=this.multiple?this.TRANSLATION.multiple.btn:this.TRANSLATION.nonMultiple.btn}reset(){this._images=[],this._clearInput(),this.formControl.reset(),this.singleChosedFileName=null}_clearInput(){this._numFiles=0,this._inputElem.nativeElement.value=""}openInputFile(){this._inputElem.nativeElement.click()}onSelectFiles(e){var t;this._images=[];let n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.files;if(!(null==n?void 0:n.length)||null==n.item(0))return this._clearInput(),void this.onClearInput.emit();let{files:i,allOk:a}=this._extractFiles(n);if(!a)return this._clearInput(),void this._showOutAcceptErrorMsg();i.forEach(e=>this._readFile(e))}_extractFiles(e){var t;this._numFiles=null!==(t=e.length)&&void 0!==t?t:0;let n=[],i=!0,a=0;do{let t=e.item(a++);n.push(t),i=i&&this.ACCEPT_IMG.includes(t.type)}while(i&&a<this._numFiles);return{files:n,allOk:i}}_showOutAcceptErrorMsg(){const e=this.ACCEPT_IMG.map(e=>e.replace("image/","")).join(", ");let t=this.translationService.getTranslationObj(this.multiple?this.TRANSLATION.multiple.acceptErrorMsg:this.TRANSLATION.nonMultiple.acceptErrorMsg,{accept:e});this.toastService.error(t,7e3)}_readFile(e){const t=new FileReader;t.onload=t=>{this._images.push(new z(t.target.result,e.name)),this._images.length==this._numFiles&&this._finishReadFiles()},t.readAsDataURL(e)}_finishReadFiles(){this.formControl.setValue(this._images),this.singleChosedFileName=this._images[0].filename}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(X.a),s.Ob(Y.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-upload-image"]],viewQuery:function(e,t){if(1&e&&s.Jc(Z,1),2&e){let e;s.sc(e=s.cc())&&(t._inputElem=e.first)}},inputs:{multiple:"multiple",selectAllDir:"selectAllDir"},outputs:{onClearInput:"onClearInput"},features:[s.Ab],decls:14,vars:9,consts:[[1,"input-file"],[3,"label","labelTranslate","comment","required",4,"ngIf"],[4,"ngIf","ngIfElse"],["regularInput",""],[1,"d-flex-row"],["mat-raised-button","","type","button","color","primary",3,"click"],["showChosenFiles",""],[3,"label","labelTranslate","comment","required"],["type","file","hidden","","multiple","","webkitdirectory","",3,"accept","change"],["uploadInput",""],["type","file","hidden","",3,"accept","multiple","change"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(e,t){if(1&e&&(s.Ub(0,"div",0),s.Dc(1,ee,1,4,"app-input-label",1),s.Dc(2,te,3,1,"div",2),s.Dc(3,ne,2,2,"ng-template",null,3,s.Ec),s.Ub(5,"div",4),s.Ub(6,"button",5),s.bc("click",function(){return t.openInputFile()}),s.Ub(7,"mat-icon"),s.Fc(8,"upload"),s.Tb(),s.Fc(9),s.gc(10,"translate"),s.Tb(),s.Dc(11,ie,3,4,"div",2),s.Dc(12,le,3,3,"ng-template",null,6,s.Ec),s.Tb(),s.Tb()),2&e){const e=s.tc(4),n=s.tc(13);s.Db(1),s.lc("ngIf",t.label||t.labelTranslate),s.Db(1),s.lc("ngIf",t.selectAllDir)("ngIfElse",e),s.Db(7),s.Hc(" ",s.ic(10,6,"TRANSLATION",t.btnTranslation)," "),s.Db(2),s.lc("ngIf",0==t.numFiles)("ngIfElse",n)}},directives:[i.k,q.a,D.a,N,i.m,i.n],pipes:[l.c],styles:[".input-file[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.d-flex-row[_ngcontent-%COMP%]{gap:.25rem}"]}),e})();const se=["upload"];function ce(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div"),s.Ub(1,"app-input-text",7),s.bc("onChange",function(t){return s.vc(e),s.fc().onInsertUrl(t)}),s.Tb(),s.Tb()}if(2&e){const e=s.fc();s.Db(1),s.lc("labelTranslate",e.TRANSLATION.url)("form",e.form)("controlName",e.myControlName.url)}}function me(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div"),s.Ub(1,"app-upload-image",8,9),s.bc("onClearInput",function(){return s.vc(e),s.fc().deleteFile()}),s.Tb(),s.Tb()}if(2&e){const e=s.fc();s.Db(1),s.lc("labelTranslate",e.TRANSLATION.upload)("form",e.form)("controlName",e.myControlName.upload)}}let ue=(()=>{class e{constructor(){this.TRANSLATION=g.input.backgroundImg,this.myControlName={}}ngOnInit(){this.myControlName={srcType:`${this.controlName}SrcType`,url:`${this.controlName}Url`,upload:`${this.controlName}Upload`},this.form.addControl(this.myControlName.srcType,new a.e(null,a.r.required)),this.form.addControl(this.myControlName.url,new a.e),this.form.addControl(this.myControlName.upload,new a.e),this.form.get(this.myControlName.upload).valueChanges.subscribe(e=>this._onUpload(e))}ngOnDestroy(){Object.values(this.myControlName).forEach(e=>this.form.removeControl(e))}onChooseInputType(e){this.isUrl=e==m.URL,this.imgPreview=null,this.form.get(this.controlName).setValue(null),this.isUrl?(this._setFormControlAsRequired(this.myControlName.url),this._setFormControlAsNotRequired(this.myControlName.upload)):(this._setFormControlAsRequired(this.myControlName.upload),this._setFormControlAsNotRequired(this.myControlName.url))}_setFormControlAsRequired(e){u.setFormControlAsRequired(this.form.get(e))}_setFormControlAsNotRequired(e){u.setFormControlAsNotRequired(this.form.get(e))}_onUpload(e){this._setImage((null==e?void 0:e.length)?e[0].base64:null)}onInsertUrl(e){let t=e;e||(t=null),this._setImage(t)}_setImage(e){this.imgPreview=e,this.form.get(this.controlName).setValue(e)}deleteFile(){var e;[this.myControlName.url,this.myControlName.upload].forEach(e=>this.form.get(e).setValue(null)),this._setImage(null),null===(e=this._uploadChild)||void 0===e||e.reset()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-background-image-form"]],viewQuery:function(e,t){if(1&e&&s.Jc(se,1),2&e){let e;s.sc(e=s.cc())&&(t._uploadChild=e.first)}},inputs:{form:"form",controlName:"controlName"},decls:8,vars:7,consts:[[1,"input-image"],[3,"form","controlName","onChange"],[1,"form-item"],[1,"input-preview"],[3,"ngSwitch","ngClass"],[4,"ngSwitchCase"],[3,"src","onDelete"],[3,"labelTranslate","form","controlName","onChange"],[3,"labelTranslate","form","controlName","onClearInput"],["upload",""]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"app-select-image-src-type",1),s.bc("onChange",function(e){return t.onChooseInputType(e)}),s.Tb(),s.Ub(2,"div",2),s.Ub(3,"div",3),s.Ub(4,"div",4),s.Dc(5,ce,2,3,"div",5),s.Dc(6,me,3,3,"div",5),s.Tb(),s.Ub(7,"app-image-preview",6),s.bc("onDelete",function(){return t.deleteFile()}),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Db(1),s.lc("form",t.form)("controlName",t.myControlName.srcType),s.Db(3),s.lc("ngSwitch",t.isUrl)("ngClass",t.isUrl?"form-item":""),s.Db(1),s.lc("ngSwitchCase",!0),s.Db(1),s.lc("ngSwitchCase",!1),s.Db(1),s.lc("src",t.imgPreview))},directives:[M,i.m,i.i,i.n,G,J,oe],styles:[".input-image[_ngcontent-%COMP%]{gap:1rem;align-items:flex-start}.input-image[_ngcontent-%COMP%], .input-preview[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.input-preview[_ngcontent-%COMP%]{gap:.5rem;align-items:center}.img-preview[_ngcontent-%COMP%]{width:50px;height:auto}.delete-btn[_ngcontent-%COMP%]{margin-top:.75rem}"]}),e})();var pe=n("0IaG");let be=(()=>{class e{constructor(){this.TRANSLATION=g.diffImagesPerPairDialog,this.SEP=p.a.upload.fileNameSeparator}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-card-image-filename-example-dialog"]],decls:22,vars:20,consts:[[1,"dialog-header"],["mat-dialog-title",""],["mat-icon-button","","mat-dialog-close","","id","modal-close-btn",3,"matTooltip"],["mat-dialog-content",""],[1,"image-cont"],["src","assets/images/upload_diff_images_per_pair_example.png","alt","Image"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"div"),s.Fc(3),s.gc(4,"translate"),s.Tb(),s.Ub(5,"button",2),s.gc(6,"translate"),s.Ub(7,"mat-icon"),s.Fc(8,"close"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(9,"div",3),s.Ub(10,"div"),s.Fc(11),s.gc(12,"translate"),s.Ub(13,"i"),s.Fc(14),s.gc(15,"translate"),s.Tb(),s.Fc(16),s.Ub(17,"i"),s.Fc(18),s.gc(19,"translate"),s.Tb(),s.Tb(),s.Ub(20,"div",4),s.Pb(21,"img",5),s.Tb(),s.Tb()),2&e&&(s.Db(3),s.Gc(s.ic(4,6,"TRANSLATION",t.TRANSLATION.title)),s.Db(2),s.mc("matTooltip",s.hc(6,9,"CLOSE")),s.Db(6),s.Hc(" ",s.ic(12,11,"TRANSLATION",t.TRANSLATION.instruction),": "),s.Db(3),s.Hc("[",s.ic(15,14,"TRANSLATION",t.TRANSLATION.pairName),"]"),s.Db(2),s.Hc(" ",t.SEP," "),s.Db(2),s.Hc("[",s.ic(19,17,"TRANSLATION",t.TRANSLATION.imageId),"]"))},directives:[pe.g,q.a,pe.d,k.a,D.a,pe.e],pipes:[l.c],styles:[".mat-dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}.mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:.5rem}.mat-dialog-content[_ngcontent-%COMP%], .mat-dialog-content[_ngcontent-%COMP%]   .image-cont[_ngcontent-%COMP%]{display:flex;justify-content:center}.mat-dialog-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:4px;max-width:80%}"]}),e})();class ge{constructor(e,t){this.numPairs=e,this.singleImgPerPair=t}get numCards(){return this.numPairs*(this.singleImgPerPair?1:2)}}var de=n("CzQJ");let fe=(()=>{class e extends R{ngOnInit(){this.options=[{id:!0,label:{pt:"Sim",en:"Yes"}},{id:!1,label:{pt:"N\xe3o",en:"No"}}]}}return e.\u0275fac=function(t){return he(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-select-yes-no"]],features:[s.Ab],decls:1,vars:5,consts:[[3,"label","labelTranslate","form","controlName","optionsTranslate","onChange"]],template:function(e,t){1&e&&(s.Ub(0,"app-select",0),s.bc("onChange",function(e){return t.onChangeSelection(e)}),s.Tb()),2&e&&s.lc("label",t.label)("labelTranslate",t.labelTranslate)("form",t.form)("controlName",t.controlName)("optionsTranslate",t.options)},directives:[R],encapsulation:2}),e})();const he=s.Wb(fe);function Te(e,t){if(1&e&&s.Pb(0,"app-input-label",5),2&e){const e=s.fc();s.lc("label",e.label)("labelTranslate",e.labelTranslate)("comment",e.labelComment)("required",e.isRequired)}}function Ie(e,t){1&e&&(s.Ub(0,"mat-error"),s.Ub(1,"mat-icon",6),s.Fc(2,"cancel"),s.Tb(),s.Ub(3,"strong"),s.Fc(4),s.gc(5,"translate"),s.Tb(),s.Tb()),2&e&&(s.Db(4),s.Gc(s.hc(5,1,"FORM_INPUT.REQUIRED")))}const Ce=function(e){return{min:e}};function Ne(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Ub(1,"mat-icon",6),s.Fc(2,"cancel"),s.Tb(),s.Ub(3,"strong"),s.Fc(4),s.gc(5,"translate"),s.Tb(),s.Tb()),2&e){const e=s.fc();s.Db(4),s.Gc(s.ic(5,1,"FORM_INPUT.MIN_VALUE",s.qc(4,Ce,e.min)))}}const ve=function(e){return{max:e}};function Ae(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Ub(1,"mat-icon",6),s.Fc(2,"cancel"),s.Tb(),s.Ub(3,"strong"),s.Fc(4),s.gc(5,"translate"),s.Tb(),s.Tb()),2&e){const e=s.fc();s.Db(4),s.Gc(s.ic(5,1,"FORM_INPUT.MAX_VALUE",s.qc(4,ve,e.max)))}}function De(e,t){1&e&&(s.Ub(0,"mat-error"),s.Ub(1,"mat-icon",7),s.Fc(2,"cancel"),s.Tb(),s.Ub(3,"strong"),s.Fc(4),s.gc(5,"translate"),s.Tb(),s.Tb()),2&e&&(s.Db(4),s.Gc(s.hc(5,1,"FORM_INPUT.INVALID")))}let Oe=(()=>{class e extends d{constructor(){super(...arguments),this.min=null,this.max=null}sendValueChange(e){var t;let n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.valueAsNumber;isNaN(n)&&(n=null),this.onChange.emit(n)}}return e.\u0275fac=function(t){return _e(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-input-number"]],inputs:{min:"min",max:"max"},features:[s.Ab],decls:8,vars:10,consts:[[3,"id","ngClass"],[3,"label","labelTranslate","comment","required",4,"ngIf"],["appearance","outline","floatLabel","never","color","primary",1,"w-100","mat-form-field-label-out"],["matInput","","type","number",3,"formControl","min","max","change"],[4,"ngIf"],[3,"label","labelTranslate","comment","required"],["aria-hidden","false"],["aria-label","false"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Dc(1,Te,1,4,"app-input-label",1),s.Ub(2,"mat-form-field",2),s.Ub(3,"input",3),s.bc("change",function(e){return t.sendValueChange(e)}),s.Tb(),s.Dc(4,Ie,6,3,"mat-error",4),s.Dc(5,Ne,6,6,"mat-error",4),s.Dc(6,Ae,6,6,"mat-error",4),s.Dc(7,De,6,3,"mat-error",4),s.Tb(),s.Tb()),2&e&&(s.nc("id","",t.controlName,"-div"),s.lc("ngClass",t.inputClass),s.Db(1),s.lc("ngIf",t.label||t.labelTranslate),s.Db(2),s.lc("formControl",t.formControl)("min",t.min)("max",t.max),s.Db(1),s.lc("ngIf",t.isRequired),s.Db(1),s.lc("ngIf",null!=t.min&&t.formControl.hasError("min")),s.Db(1),s.lc("ngIf",null!=t.max&&t.formControl.hasError("max")),s.Db(1),s.lc("ngIf",null==t.min&&null==t.max&&t.isInvalid))},directives:[i.i,i.k,f.c,B.b,a.p,a.c,a.m,a.f,N,f.b,D.a],pipes:[l.c],styles:["",".d-flex-row[_ngcontent-%COMP%]{justify-content:space-between}"]}),e})();const _e=s.Wb(Oe);function Ue(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div"),s.Ub(1,"div",4),s.Ub(2,"div",5),s.Ub(3,"app-input-text",6),s.bc("onChange",function(n){s.vc(e);const i=t.$implicit;return s.fc(3).onInsertUrl(n,i)}),s.gc(4,"translate"),s.Tb(),s.Tb(),s.Ub(5,"div",7),s.Ub(6,"app-image-preview",8),s.bc("onDelete",function(){s.vc(e);const n=t.$implicit;return s.fc(3).deleteUrl(n)}),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&e){const e=t.$implicit,n=s.fc(3);s.Db(3),s.oc("label","",s.ic(4,4,"TRANSLATION",n.TRANSLATION.url.pairImageLink),"",e+1,""),s.lc("form",n.getSubForm(e)),s.Db(3),s.lc("src",n.getUrl(e))}}function Pe(e,t){if(1&e&&(s.Ub(0,"div"),s.Dc(1,Ue,7,7,"div",3),s.Tb()),2&e){const e=s.fc(2);s.Db(1),s.lc("ngForOf",e.indices)}}function Se(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div",10),s.Ub(1,"div",11),s.Fc(2),s.gc(3,"translate"),s.Tb(),s.Ub(4,"div",4),s.Ub(5,"app-input-text",12),s.bc("onChange",function(n){s.vc(e);const i=t.$implicit;return s.fc(3).onInsertUrl(n,i)}),s.gc(6,"translate"),s.Tb(),s.Ub(7,"app-image-preview",13),s.bc("onDelete",function(){s.vc(e);const n=t.$implicit;return s.fc(3).deleteUrl(n)}),s.Tb(),s.Ub(8,"app-input-text",14),s.bc("onChange",function(n){s.vc(e);const i=t.$implicit;return s.fc(3).onInsertUrl(n,i,1)}),s.gc(9,"translate"),s.Tb(),s.Ub(10,"app-image-preview",13),s.bc("onDelete",function(){s.vc(e);const n=t.$implicit;return s.fc(3).deleteUrl(n,1)}),s.Tb(),s.Tb(),s.Tb()}if(2&e){const e=t.$implicit,n=s.fc(3);s.Db(2),s.Ic("",s.ic(3,10,"TRANSLATION",n.TRANSLATION.pair),"",e+1,""),s.Db(3),s.oc("label","",s.ic(6,13,"TRANSLATION",n.TRANSLATION.url.diffImages.pairImageLink1),"",e+1,""),s.lc("form",n.getSubForm(e)),s.Db(2),s.lc("src",n.getUrl(e)),s.Db(1),s.oc("label","",s.ic(9,16,"TRANSLATION",n.TRANSLATION.url.diffImages.pairImageLink2),"",e+1,""),s.lc("form",n.getSubForm(e)),s.Db(2),s.lc("src",n.getUrl(e,1))}}function Fe(e,t){if(1&e&&s.Dc(0,Se,11,19,"div",9),2&e){const e=s.fc(2);s.lc("ngForOf",e.indices)}}function ye(e,t){if(1&e&&(s.Ub(0,"div"),s.Dc(1,Pe,2,1,"div",1),s.Dc(2,Fe,1,1,"ng-template",null,2,s.Ec),s.Tb()),2&e){const e=s.tc(3),t=s.fc();s.Db(1),s.lc("ngIf",t.urlPairConfig.singleImgPerPair)("ngIfElse",e)}}let Le=(()=>{class e{constructor(e){this.fb=e,this.TRANSLATION=g.input.cardImages,this._cardImageMap={}}ngOnInit(){this._init()}ngOnDestroy(){this.form.removeControl("cardUrls")}ngOnChanges(e){e.urlPairConfig&&!e.urlPairConfig.firstChange&&this._init()}_init(){this._cardImageMap={},this._numCardImages=this.urlPairConfig.numCards,this._initFormArray(),this._setIndicesAndFillFormArray()}_initFormArray(){let e=this.fb.group({urls:this.fb.array([])});this.form.addControl("cardUrls",e),this._formArray=e.controls.urls}_setIndicesAndFillFormArray(){let e=[...Array(this.urlPairConfig.numPairs).keys()];e.forEach(e=>{this._formArray.push(this._buildSubFormArray())}),this.indices=e}_buildSubFormArray(){let e=this.fb.group({url:new a.e(null,a.r.required)});return this.urlPairConfig.singleImgPerPair||e.addControl("url2",new a.e(null,a.r.required)),e}getSubForm(e){var t;return null===(t=this._formArray)||void 0===t?void 0:t.controls[e]}getUrl(e,t=0){var n;try{return null===(n=this._cardImageMap[this._buildCardImageKey(e,t)])||void 0===n?void 0:n.base64}catch(i){return null}}_buildCardImageKey(e,t){return`${e}${t}`}onInsertUrl(e,t,n=0){let i=this._buildCardImageKey(t,n);this._cardImageMap[i]={base64:e,filename:`pair${t+1}_img${n+1}`},this._updateFormControl()}deleteUrl(e,t=0){let n="url";1==t&&(n="url2"),this.getSubForm(e).get(n).reset();let i=this._buildCardImageKey(e,t);delete this._cardImageMap[i],this._updateFormControl()}_updateFormControl(){let e=Object.values(this._cardImageMap);e.length!==this._numCardImages?this.form.get(this.controlName).setValue(null):this.form.get(this.controlName).setValue(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(a.d))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-card-images-url-input"]],inputs:{form:"form",controlName:"controlName",urlPairConfig:"urlPairConfig"},features:[s.Bb],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["showDoubleInput",""],[4,"ngFor","ngForOf"],[1,"d-flex-row"],[1,"flex-8"],["controlName","url",3,"label","form","onChange"],[1,"flex-4"],[3,"src","onDelete"],["class","d-flex-col",4,"ngFor","ngForOf"],[1,"d-flex-col"],[1,"mt-2","fst-italic"],["controlName","url",1,"flex-4",3,"label","form","onChange"],[1,"flex-2",3,"src","onDelete"],["controlName","url2",1,"flex-4",3,"label","form","onChange"]],template:function(e,t){1&e&&s.Dc(0,ye,4,2,"div",0),2&e&&s.lc("ngIf",t.indices)},directives:[i.k,i.j,J,G],pipes:[l.c],styles:[".d-flex-col[_ngcontent-%COMP%]{gap:1em}.flex-2[_ngcontent-%COMP%]{flex:2 0 0}.flex-4[_ngcontent-%COMP%]{flex:4 0 0}.flex-8[_ngcontent-%COMP%]{flex:8 0 0}"]}),e})();function Re(e,t){if(1&e){const e=s.Vb();s.Ub(0,"app-input-number",8),s.bc("onChange",function(t){return s.vc(e),s.fc().onChangeNumPairsForUrl(t)}),s.Tb()}if(2&e){const e=s.fc();s.lc("labelTranslate",e.TRANSLATION.input.numPairs)("form",e.form)("min",e.MIN_NUM_PAIRS)}}function we(e,t){if(1&e&&s.Pb(0,"app-upload-image",9),2&e){const e=s.fc();s.lc("labelTranslate",e.TRANSLATION.input.cardImages.upload.pickDirPath)("form",e.form)("selectAllDir",!0)}}function xe(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div",10),s.Ub(1,"mat-icon"),s.Fc(2,"warning"),s.Tb(),s.Ub(3,"span"),s.Fc(4),s.gc(5,"translate"),s.Ub(6,"a",11),s.bc("click",function(){return s.vc(e),s.fc().openExample()}),s.Fc(7),s.gc(8,"translate"),s.Tb(),s.Fc(9,". "),s.Tb(),s.Tb()}if(2&e){const e=s.fc();s.Db(4),s.Hc(" ",s.ic(5,2,"TRANSLATION",e.TRANSLATION.input.cardImages.upload.diffImagesPerPair.warning)," "),s.Db(3),s.Hc(" ",s.ic(8,5,"TRANSLATION",e.TRANSLATION.input.cardImages.upload.diffImagesPerPair.warningLink)," ")}}function Me(e,t){if(1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",12),s.Pb(2,"app-card-images-url-input",13),s.Tb(),s.Tb()),2&e){const e=s.fc();s.Db(2),s.lc("form",e.form)("urlPairConfig",e.urlPairConfig)}}let Ee=(()=>{class e{constructor(e){this.dialogService=e,this.TRANSLATION=g,this.FILENAME_SEP=p.a.upload.fileNameSeparator,this.MIN_NUM_PAIRS=2,this.showFilePatternWarning=!1}ngOnInit(){this.form=this.parent.form}onChangeCardImageSrcType(e){this.addUrls=e===m.URL,this.addUrls?this.form.addControl("numPairs",new a.e(null,[a.r.required,a.r.min(this.MIN_NUM_PAIRS)])):this.form.removeControl("numPairs"),this._handleInputChange()}onChangeSingleImgPerPair(){this._handleInputChange()}onChangeNumPairsForUrl(e){e<this.MIN_NUM_PAIRS||this._handleInputChange()}_handleInputChange(){var e;let t=this.form.get("singleImgPerPair").value,n=this.form.get("cardImageSrcType").value,i=null===(e=this.form.get("numPairs"))||void 0===e?void 0:e.value,a=n===m.UPLOAD;this.showFilePatternWarning=a&&!1===t,this.urlPairConfig=a||i<this.MIN_NUM_PAIRS||[t,n,i].some(e=>null==e)?null:new ge(i,t)}openExample(){this.dialogService.openCustomDialog(be,80)}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(de.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-card-images-form"]],inputs:{parent:"parent"},decls:9,vars:12,consts:[[1,"form-line"],["controlName","singleImgPerPair",3,"label","form","onChange"],["controlName","cardImageSrcType",3,"form","multiple","onChange"],[3,"ngSwitch"],["controlName","numPairs",3,"labelTranslate","form","min","onChange",4,"ngSwitchCase"],["controlName","cardImages",3,"labelTranslate","form","selectAllDir",4,"ngSwitchCase"],["class","file-warning",4,"ngIf"],["class","form-line",4,"ngIf"],["controlName","numPairs",3,"labelTranslate","form","min","onChange"],["controlName","cardImages",3,"labelTranslate","form","selectAllDir"],[1,"file-warning"],[1,"example-link",3,"click"],[1,"form-item","mt-3"],["controlName","cardImages",3,"form","urlPairConfig"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"app-select-yes-no",1),s.bc("onChange",function(){return t.onChangeSingleImgPerPair()}),s.gc(2,"translate"),s.Tb(),s.Ub(3,"app-select-image-src-type",2),s.bc("onChange",function(e){return t.onChangeCardImageSrcType(e)}),s.Tb(),s.Ub(4,"div",3),s.Dc(5,Re,1,3,"app-input-number",4),s.Dc(6,we,1,3,"app-upload-image",5),s.Tb(),s.Tb(),s.Dc(7,xe,10,8,"div",6),s.Dc(8,Me,3,2,"div",7)),2&e&&(s.Db(1),s.mc("label",s.ic(2,9,"TRANSLATION",t.TRANSLATION.input.singleImgPerPair)),s.lc("form",t.form),s.Db(2),s.lc("form",t.form)("multiple",!0),s.Db(1),s.lc("ngSwitch",t.addUrls),s.Db(1),s.lc("ngSwitchCase",!0),s.Db(1),s.lc("ngSwitchCase",!1),s.Db(1),s.lc("ngIf",t.showFilePatternWarning),s.Db(1),s.lc("ngIf",t.urlPairConfig))},directives:[fe,M,i.m,i.n,i.k,Oe,oe,D.a,Le],pipes:[l.c],styles:[".layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.d-flex-col[_ngcontent-%COMP%]{gap:1em}.num-pairs[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem;align-items:flex-start}.num-pairs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1.5rem}.file-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#e89c12;color:#fff;padding:4px;border-radius:2px;max-width:-moz-max-content;max-width:max-content}.example-link[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}"]}),e})();var qe=n("YzOW");class ke{get numPairs(){let e=this.cardImages.length;return this.singleImgPerPair||(e/=2),e}}var Ve=n("VdwR");function Ge(e,t){if(1&e&&(s.Ub(0,"div"),s.Ub(1,"form",4),s.Ub(2,"div",5),s.Pb(3,"app-select",6),s.gc(4,"translate"),s.Pb(5,"app-select-yes-no",7),s.Pb(6,"app-select",8),s.Tb(),s.Tb(),s.Tb()),2&e){const e=s.fc();s.Db(1),s.lc("formGroup",e.form),s.Db(2),s.mc("label",s.ic(4,9,"TRANSLATION",e.TRANSLATION.input.cardIdType)),s.lc("form",e.form)("optionsTranslate",e.options.cardId),s.Db(2),s.lc("labelTranslate",e.TRANSLATION.input.singleImgPerPair)("form",e.form),s.Db(1),s.lc("labelTranslate",e.TRANSLATION.input.numPairs)("form",e.form)("options",e.options.numPairs)}}function Be(e,t){if(1&e&&(s.Ub(0,"div",15),s.Pb(1,"app-background-image-form",16),s.Tb()),2&e){const e=s.fc(2);s.Db(1),s.lc("form",e.form)}}function $e(e,t){if(1&e){const e=s.Vb();s.Ub(0,"form",4),s.Ub(1,"span",9),s.Fc(2),s.gc(3,"translate"),s.Tb(),s.Ub(4,"div",5),s.Pb(5,"app-input-text",10),s.Pb(6,"app-select",11),s.Tb(),s.Pb(7,"mat-divider"),s.Ub(8,"span",9),s.Fc(9),s.gc(10,"translate"),s.Tb(),s.Ub(11,"div",5),s.Ub(12,"app-select-yes-no",12),s.bc("onChange",function(t){return s.vc(e),s.fc().onChangeAddBackgroundImg(t)}),s.Tb(),s.Dc(13,Be,2,1,"div",13),s.Tb(),s.Pb(14,"mat-divider"),s.Ub(15,"span",9),s.Fc(16),s.gc(17,"translate"),s.Tb(),s.Pb(18,"app-card-images-form",14),s.Tb()}if(2&e){const e=s.fc();s.lc("formGroup",e.form),s.Db(2),s.Hc(" ",s.ic(3,13,"TRANSLATION",e.TRANSLATION.sectionTitle.mainData)," "),s.Db(3),s.lc("labelTranslate",e.TRANSLATION.input.gameTitle)("form",e.form),s.Db(1),s.lc("labelTranslate",e.TRANSLATION.input.singleImgPerPair)("form",e.form)("optionsTranslate",e.options.cardId),s.Db(3),s.Hc(" ",s.ic(10,16,"TRANSLATION",e.TRANSLATION.sectionTitle.backgroundImg)," "),s.Db(3),s.lc("labelTranslate",e.TRANSLATION.input.backgroundImg.add)("form",e.form),s.Db(1),s.lc("ngIf",e.flag.addBackgroundImg),s.Db(3),s.Hc(" ",s.ic(17,19,"TRANSLATION",e.TRANSLATION.sectionTitle.cardImages)," "),s.Db(2),s.lc("parent",e)}}let je=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.gameService=t,this.toastService=n,this.translationService=i,this.TRANSLATION=g,this.ACCEPT_IMG=["image/png","image/jpeg"],this.options={},this.flag={},this.submitBtnTranslation={}}ngOnInit(){this.flag={isDemo:this._isDemo},this._initForm(),this._setOptions(),this._setSubmitBtn()}get _isDemo(){return this.parent.isDemo}_initForm(){this.form=this.fb.group({title:new a.e("Memory Game",a.r.required),cardIdType:new a.e(qe.a.NUMBERS,a.r.required),addBackgroundImg:new a.e(!1,a.r.required),backgroundImgSrc:new a.e(null),singleImgPerPair:new a.e(null,a.r.required),cardImageSrcType:new a.e(null,a.r.required),cardImages:new a.e(null,a.r.required)}),this._isDemo&&(this.form.addControl("numPairs",new a.e(null,a.r.required)),this.form.removeControl("addBackgroundImg"),this.form.removeControl("backgroundImgSrc"),this.form.removeControl("cardImageSrcType"),this.form.removeControl("cardImages"))}_setOptions(){const e=qe.b;this.options={cardId:[{id:qe.a.NUMBERS,label:e[qe.a.NUMBERS]},{id:qe.a.ROW_COLUMN,label:e[qe.a.ROW_COLUMN]},{id:qe.a.ICONS,label:e[qe.a.ICONS]}]},this._isDemo&&(this.options.numPairs=[],[4,6,8,10].forEach(e=>this.options.numPairs.push({id:e,label:e})))}_setSubmitBtn(){this.submitBtnTranslation=this._isDemo?this.TRANSLATION.submitBtn.playDemo:this.TRANSLATION.submitBtn.createGame}onChangeAddBackgroundImg(e){this.flag.addBackgroundImg=e,this.form.get("backgroundImgSrc").setValue(null)}submit(){var e;if(this.form.markAllAsTouched(),this.form.invalid)return this.toastService.showInvalidFormError();let t=Object.assign({},this.form.value),n=new ke;n.title=t.title.toUpperCase(),n.singleImgPerPair=t.singleImgPerPair,n.cardIdType=t.cardIdType,n.backgroundImgSrc=t.backgroundImgSrc,n.cardImages=null!==(e=t.cardImages)&&void 0!==e?e:[],this._isDemo&&(n.title=this.translationService.getTranslationObj(this.TRANSLATION.gameTitle.demo),this._setDemoCardImages(n,t.numPairs)),this.gameService.create(n)}_setDemoCardImages(e,t){const n="assets/images/demo-game-cards";for(let i=1;i<=t;i++){let t=`num${i}_draw.png`;e.cardImages.push(new z(`${n}/draw/${t}`,t))}if(!e.singleImgPerPair)for(let i=1;i<=t;i++){let t=`num${i}_word.png`;e.cardImages.push(new z(`${n}/words/${t}`,t))}}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(a.d),s.Ob(Ve.a),s.Ob(X.a),s.Ob(Y.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-game-builder-form"]],inputs:{parent:"parent"},decls:9,vars:6,consts:[[4,"ngIf","ngIfElse"],["showFullBuilderForm",""],[1,"mt-4","text-center"],["mat-raised-button","","type","submit","color","primary",3,"click"],[3,"formGroup"],[1,"form-line"],["controlName","cardIdType",1,"form-item",3,"label","form","optionsTranslate"],["controlName","singleImgPerPair",1,"form-item",3,"labelTranslate","form"],["controlName","numPairs",1,"form-item",3,"labelTranslate","form","options"],[1,"subtitle","color-primary"],["controlName","title",1,"input-title",3,"labelTranslate","form"],["controlName","cardIdType",1,"input-card-id",3,"labelTranslate","form","optionsTranslate"],["controlName","addBackgroundImg",3,"labelTranslate","form","onChange"],["class","form-item",4,"ngIf"],[3,"parent"],[1,"form-item"],["controlName","backgroundImgSrc",3,"form"]],template:function(e,t){if(1&e&&(s.Dc(0,Ge,7,12,"div",0),s.Dc(1,$e,19,22,"ng-template",null,1,s.Ec),s.Ub(3,"div",2),s.Ub(4,"button",3),s.bc("click",function(){return t.submit()}),s.Ub(5,"mat-icon"),s.Fc(6,"sports_esports"),s.Tb(),s.Fc(7),s.gc(8,"translate"),s.Tb(),s.Tb()),2&e){const e=s.tc(2);s.lc("ngIf",t.flag.isDemo)("ngIfElse",e),s.Db(7),s.Hc(" ",s.ic(8,3,"TRANSLATION",t.submitBtnTranslation)," ")}},styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.input-title[_ngcontent-%COMP%]{flex:8 0 0}.input-card-id[_ngcontent-%COMP%]{flex:4 0 0}.input-file[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.subtitle[_ngcontent-%COMP%]{font-size:16px}"]}),e})(),He=(()=>{class e{constructor(e){this.route=e,this.TRANSLATION=g,this.pageTitleTranslation={}}ngOnInit(){var e;null===(e=this.route.data)||void 0===e||e.subscribe(e=>{var t;this._isDemo=null!==(t=e.demo)&&void 0!==t&&t,this.pageTitleTranslation=this._isDemo?this.TRANSLATION.pageTitle.demoBuilder:this.TRANSLATION.pageTitle.gameBuilder})}get isDemo(){return this._isDemo}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(r.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-game-builder"]],decls:8,vars:9,consts:[[1,"color-primary"],[1,"main-instructions","mb-4"],[3,"parent"]],template:function(e,t){1&e&&(s.Ub(0,"h1",0),s.Fc(1),s.gc(2,"translate"),s.Tb(),s.Ub(3,"div",1),s.Ub(4,"mat-label"),s.Fc(5),s.gc(6,"translate"),s.Tb(),s.Tb(),s.Pb(7,"app-game-builder-form",2)),2&e&&(s.Db(1),s.Gc(s.ic(2,3,"TRANSLATION",t.pageTitleTranslation)),s.Db(4),s.Gc(s.ic(6,6,"TRANSLATION",t.TRANSLATION.instruction)),s.Db(2),s.lc("parent",t))},styles:["h1[_ngcontent-%COMP%]{font-family:Quicksand!important}.main-instructions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]}),e})();var We=n("f0Cb");const Je=[{path:"",component:He},{path:"demo",component:He,data:{demo:!0}}];let Qe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({imports:[[i.c,r.c.forChild(Je),o.a,a.q,a.i,l.b,c]]}),e})();s.yc(He,[f.f,je],[l.c]),s.yc(je,[i.k,a.s,a.n,a.h,R,fe,J,We.a,ue,Ee,q.a,D.a],[l.c])}}]);